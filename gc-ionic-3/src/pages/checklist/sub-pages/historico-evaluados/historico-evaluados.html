<ion-header box-shadow>
    <ion-navbar>
        <div buy>
            <ion-title><span ion-text color="primary">{{module}}</span></ion-title>
        </div>
    </ion-navbar>
</ion-header>

<ion-content class="has-subheader fondo-bg">

    <div ion-text text-center>
        <h4 ion-text text-center center color="primary" *ngIf="checklists.length < 1">
            Sin histórico evaluados de {{module}}
        </h4>
    </div>
    <ion-list-header no-margin no-padding class="tamañoCustom2 paddingEspecial" color="stable"
                     *ngIf="checklists.length >= 1">{{module}} Historicos Evaluados
    </ion-list-header>
    <ion-card-content padding-top>
        <div *ngIf="checklists.length > 0">
            <div *ngFor="let checklist of checklists">
                <ion-item class="item-icon-left item-icon-right item-text-wrap" *ngIf="checklist.estado_id != 4">
                    <span ion-text color="primary" text-wrap><strong>{{checklist.nombre}}</strong></span>
                    <p>Ambitos: <b>{{checklist.ambitos_cantidad}}</b></p>
                    <p>Preguntas: <b>({{checklist.preguntas.contestadas}}/{{checklist.preguntas.total}})</b></p>
                    <p *ngIf="checklist.estado_id">Estado:
                        <span [ngClass]="{'dark': checklist.estado_id == 1, 'energized': checklist.estado_id == 2, 'balanced': checklist.estado_id == 3, 'calm': checklist.estado_id == 4}">{{checklist.estado_nombre}}</span>
                    </p>
                    <p *ngIf="!checklist.estado_id">Estado: <span class="assertive">Visita sin iniciar</span></p>
                    <p *ngIf="!checklist.estado_id">Estado: <span class="assertive">Fuera de horario</span></p>
                </ion-item>

                <ion-item text-wrap icon-right *ngIf="checklist.estado_id == 4" (click)="navigateToAmbito(checklist.id, checklist.cuestionario_sucursal_id)">
                    <span ion-text color="primary" text-wrap><strong>{{checklist.nombre}}</strong></span>
                    <p>Ambitos: <b>{{checklist.ambitos_cantidad}}</b></p>
                    <p>Preguntas: <b>({{checklist.preguntas.contestadas}}/{{checklist.preguntas.total}})</b></p>
                    <p *ngIf="checklist.estado_id">Estado:
                        <span [ngClass]="{'dark': checklist.estado_id == 1, 'energized': checklist.estado_id == 2, 'balanced': checklist.estado_id == 3, 'calm': checklist.estado_id == 4}">{{checklist.estado_nombre}}</span>
                    </p>
                    <p *ngIf="!checklist.estado_id">Estado: <span class="assertive">Visita sin iniciar</span></p>
                    <p *ngIf="!checklist.estado_id">Estado: <span class="assertive">Fuera de horario</span></p>
                    <ion-icon name='ios-arrow-forward' item-end color="default" class="icon-lg"></ion-icon>
                </ion-item>

            </div>
        </div>
    </ion-card-content>

    <!--<ion-row *ngIf="checklists.length < 1">
        <ion-col col-12>
            <ion-list-header box-shadow no-margin no-lines>
                <h1 header-title>Sin histórico de {{module}}</h1>
            </ion-list-header>
        </ion-col>
    </ion-row>
    <ion-row *ngIf="checklists.length >= 1">
        <ion-col col-12>
            <ion-list-header box-shadow no-margin no-lines>
                <h1 header-title>{{module}} Historicos Evaluados</h1>
            </ion-list-header>
        </ion-col>
    </ion-row>

    <ion-refresher (ionRefresh)="refreshHistoric($event)" color="dark">
        <ion-refresher-content pullingText="Actualizar" refreshingText="Actualizando..."></ion-refresher-content>
    </ion-refresher>

    <ion-list>
        <div class="card" *ngFor="let checklist of checklists">
            <ion-list>
                <ion-item class="item-icon-left item-icon-right item-text-wrap" *ngIf="checklists.length > 0"
                          (click)="navigateToAmito(checklist.id)">
                    <div class="row">
                        <div class="col-90">
                            <span ion-text color="primary" class="positive"><strong>{{checklist.nombre}}</strong></span>
                            <p>Ambitos: <b>{{checklist.ambitos_cantidad}}</b></p>
                            <p>Preguntas: <b>({{checklist.preguntas.contestadas}}/{{checklist.preguntas.total}})</b></p>
                            <p *ngIf="checklist.estado_id">Estado:
                                <span [ngClass]="{'dark': checklist.estado_id == 1, 'energized': checklist.estado_id == 2, 'balanced': checklist.estado_id == 3, 'calm': checklist.estado_id == 4}">{{checklist.estado_nombre}}</span>
                            </p>
                            <p *ngIf="!checklist.estado_id">Estado: <span class="assertive">Visita sin iniciar</span>
                            </p>
                        </div>
                    </div>
                    <ion-icon name='arrow-forward' item-end color="default" class="icon-lg"></ion-icon>
                </ion-item>
            </ion-list>
        </div>
    </ion-list>-->
</ion-content>